




//AUTOGENERATED, DO NOTMODIFY.
//Do not edit this file directly.

#pragma warning disable 1591
// ReSharper disable CheckNamespace

using System;
using System.Linq;
using System.Collections;
using System.Collections.Generic;
using RethinkDb.Driver.Model;
using RethinkDb.Driver.Ast;
using NUnit.Framework;
using RethinkDb.Driver.Tests;
using static RethinkDb.Driver.Tests.TestingCommon;

namespace RethinkDb.Driver.Test.Generated {

    // Tests meta operations in composite queries

    [TestFixture]
    public class MetaComposite : YamlTestFixture {

        public MetaComposite (){
        }




        [Test]
        public void YamlTest(){

             {
                 SetContext( "eyJUZXN0VHlwZSI6IkphdmFRdWVyeSIsIlRlc3RGaWxlIjoibWV0YS9jb21wb3NpdGUueWFtbCIsIkxpbmVOdW0iOiI1IiwiT3JpZ2luYWwiOiJyLmRiX2Ryb3AoJ3Rlc3QnKSIsIlZhck5hbWUiOm51bGwsIlZhclR5cGUiOm51bGwsIlJ1bklmUXVlcnkiOmZhbHNlLCJWYWx1ZSI6bnVsbCwiSmF2YSI6InIuZGJEcm9wKFwidGVzdFwiKSIsIkV4cGVjdGVkT3JpZ2luYWwiOiJwYXJ0aWFsKHsnZGJzX2Ryb3BwZWQnOjF9KSIsIkV4cGVjdGVkVHlwZSI6IlBhcnRpYWwiLCJFeHBlY3RlZEphdmEiOiJwYXJ0aWFsKHIuaGFzaE1hcChcImRic19kcm9wcGVkXCIsIDFMKSkiLCJPYnRhaW5lZCI6bnVsbCwiUnVuT3B0cyI6W10sIlJlbmRlclNvbWV0aGluZyI6ZmFsc2V9" );
                 //JavaQuery, meta/composite.yaml, #5
                 /* ExpectedOriginal: partial({'dbs_dropped':1}) */
                 var expected_ = partial(r.hashMap("dbs_dropped", 1L));
                 
                 /* Original: r.db_drop('test') */
                 var obtained = runOrCatch( r.dbDrop("test") ,
                                            new {
                    }, conn);
                 
                     assertEquals(expected_, obtained);                 
             }
             
             {
                 SetContext( "eyJUZXN0VHlwZSI6IkphdmFRdWVyeSIsIlRlc3RGaWxlIjoibWV0YS9jb21wb3NpdGUueWFtbCIsIkxpbmVOdW0iOiI5IiwiT3JpZ2luYWwiOiJyLmV4cHIoWzEsMiwzXSkuZm9yX2VhY2gobGFtYmRhIHJvdzpcbnIuZGJfY3JlYXRlKCdkYl8nICsgcm93LmNvZXJjZV90bygnc3RyaW5nJykpKSIsIlZhck5hbWUiOm51bGwsIlZhclR5cGUiOm51bGwsIlJ1bklmUXVlcnkiOmZhbHNlLCJWYWx1ZSI6bnVsbCwiSmF2YSI6InIuZXhwcihyLmFycmF5KDFMLCAyTCwgM0wpKS5mb3JFYWNoKHJvdyA9PiByLmRiQ3JlYXRlKHIuYWRkKFwiZGJfXCIsIHJvdy5jb2VyY2VUbyhcInN0cmluZ1wiKSkpKSIsIkV4cGVjdGVkT3JpZ2luYWwiOiIoeydkYnNfY3JlYXRlZCc6MywnY29uZmlnX2NoYW5nZXMnOmFycmxlbigzKX0pIiwiRXhwZWN0ZWRUeXBlIjoiTWFwIiwiRXhwZWN0ZWRKYXZhIjoici5oYXNoTWFwKFwiZGJzX2NyZWF0ZWRcIiwgM0wpLndpdGgoXCJjb25maWdfY2hhbmdlc1wiLCBhcnJsZW4oM0wpKSIsIk9idGFpbmVkIjpudWxsLCJSdW5PcHRzIjpbXSwiUmVuZGVyU29tZXRoaW5nIjpmYWxzZX0=" );
                 //JavaQuery, meta/composite.yaml, #9
                 /* ExpectedOriginal: ({'dbs_created':3,'config_changes':arrlen(3)}) */
                 var expected_ = r.hashMap("dbs_created", 3L).with("config_changes", arrlen(3L));
                 
                 /* Original: r.expr([1,2,3]).for_each(lambda row:
r.db_create('db_' + row.coerce_to('string'))) */
                 var obtained = runOrCatch( r.expr(r.array(1L, 2L, 3L)).forEach(row => r.dbCreate(r.add("db_", row.coerceTo("string")))) ,
                                            new {
                    }, conn);
                 
                     assertEquals(expected_, obtained);                 
             }
             
             {
                 SetContext( "eyJUZXN0VHlwZSI6IkphdmFRdWVyeSIsIlRlc3RGaWxlIjoibWV0YS9jb21wb3NpdGUueWFtbCIsIkxpbmVOdW0iOiIxNCIsIk9yaWdpbmFsIjoici5kYl9saXN0KCkuc2V0X2RpZmZlcmVuY2UoW1wicmV0aGlua2RiXCJdKS5mb3JfZWFjaChsYW1iZGEgZGJfbmFtZTpcbnIuZXhwcihbMSwyLDNdKS5mb3JfZWFjaChsYW1iZGEgaTpcbnIuZGIoZGJfbmFtZSkudGFibGVfY3JlYXRlKCd0YmxfJyArIGkuY29lcmNlX3RvKCdzdHJpbmcnKSkpKSIsIlZhck5hbWUiOm51bGwsIlZhclR5cGUiOm51bGwsIlJ1bklmUXVlcnkiOmZhbHNlLCJWYWx1ZSI6bnVsbCwiSmF2YSI6InIuZGJMaXN0KCkuc2V0RGlmZmVyZW5jZShyLmFycmF5KFwicmV0aGlua2RiXCIpKS5mb3JFYWNoKGRiX25hbWUgPT4gci5leHByKHIuYXJyYXkoMUwsIDJMLCAzTCkpLmZvckVhY2goaSA9PiByLmRiKGRiX25hbWUpLnRhYmxlQ3JlYXRlKHIuYWRkKFwidGJsX1wiLCBpLmNvZXJjZVRvKFwic3RyaW5nXCIpKSkpKSIsIkV4cGVjdGVkT3JpZ2luYWwiOiJwYXJ0aWFsKHsndGFibGVzX2NyZWF0ZWQnOjl9KSIsIkV4cGVjdGVkVHlwZSI6IlBhcnRpYWwiLCJFeHBlY3RlZEphdmEiOiJwYXJ0aWFsKHIuaGFzaE1hcChcInRhYmxlc19jcmVhdGVkXCIsIDlMKSkiLCJPYnRhaW5lZCI6bnVsbCwiUnVuT3B0cyI6W10sIlJlbmRlclNvbWV0aGluZyI6ZmFsc2V9" );
                 //JavaQuery, meta/composite.yaml, #14
                 /* ExpectedOriginal: partial({'tables_created':9}) */
                 var expected_ = partial(r.hashMap("tables_created", 9L));
                 
                 /* Original: r.db_list().set_difference(["rethinkdb"]).for_each(lambda db_name:
r.expr([1,2,3]).for_each(lambda i:
r.db(db_name).table_create('tbl_' + i.coerce_to('string')))) */
                 var obtained = runOrCatch( r.dbList().setDifference(r.array("rethinkdb")).forEach(db_name => r.expr(r.array(1L, 2L, 3L)).forEach(i => r.db(db_name).tableCreate(r.add("tbl_", i.coerceTo("string"))))) ,
                                            new {
                    }, conn);
                 
                     assertEquals(expected_, obtained);                 
             }
             
             {
                 SetContext( "eyJUZXN0VHlwZSI6IkphdmFRdWVyeSIsIlRlc3RGaWxlIjoibWV0YS9jb21wb3NpdGUueWFtbCIsIkxpbmVOdW0iOiIyMCIsIk9yaWdpbmFsIjoici5kYl9saXN0KCkuc2V0X2RpZmZlcmVuY2UoW1wicmV0aGlua2RiXCJdKS5mb3JfZWFjaChsYW1iZGEgcm93Olxuci5kYl9kcm9wKHJvdykpIiwiVmFyTmFtZSI6bnVsbCwiVmFyVHlwZSI6bnVsbCwiUnVuSWZRdWVyeSI6ZmFsc2UsIlZhbHVlIjpudWxsLCJKYXZhIjoici5kYkxpc3QoKS5zZXREaWZmZXJlbmNlKHIuYXJyYXkoXCJyZXRoaW5rZGJcIikpLmZvckVhY2gocm93ID0+IHIuZGJEcm9wKHJvdykpIiwiRXhwZWN0ZWRPcmlnaW5hbCI6InBhcnRpYWwoeydkYnNfZHJvcHBlZCc6MywndGFibGVzX2Ryb3BwZWQnOjl9KSIsIkV4cGVjdGVkVHlwZSI6IlBhcnRpYWwiLCJFeHBlY3RlZEphdmEiOiJwYXJ0aWFsKHIuaGFzaE1hcChcImRic19kcm9wcGVkXCIsIDNMKS53aXRoKFwidGFibGVzX2Ryb3BwZWRcIiwgOUwpKSIsIk9idGFpbmVkIjpudWxsLCJSdW5PcHRzIjpbXSwiUmVuZGVyU29tZXRoaW5nIjpmYWxzZX0=" );
                 //JavaQuery, meta/composite.yaml, #20
                 /* ExpectedOriginal: partial({'dbs_dropped':3,'tables_dropped':9}) */
                 var expected_ = partial(r.hashMap("dbs_dropped", 3L).with("tables_dropped", 9L));
                 
                 /* Original: r.db_list().set_difference(["rethinkdb"]).for_each(lambda row:
r.db_drop(row)) */
                 var obtained = runOrCatch( r.dbList().setDifference(r.array("rethinkdb")).forEach(row => r.dbDrop(row)) ,
                                            new {
                    }, conn);
                 
                     assertEquals(expected_, obtained);                 
             }
             
             {
                 SetContext( "eyJUZXN0VHlwZSI6IkphdmFRdWVyeSIsIlRlc3RGaWxlIjoibWV0YS9jb21wb3NpdGUueWFtbCIsIkxpbmVOdW0iOiIyNSIsIk9yaWdpbmFsIjoici5kYl9jcmVhdGUoJ3Rlc3QnKSIsIlZhck5hbWUiOm51bGwsIlZhclR5cGUiOm51bGwsIlJ1bklmUXVlcnkiOmZhbHNlLCJWYWx1ZSI6bnVsbCwiSmF2YSI6InIuZGJDcmVhdGUoXCJ0ZXN0XCIpIiwiRXhwZWN0ZWRPcmlnaW5hbCI6InBhcnRpYWwoeydkYnNfY3JlYXRlZCc6MX0pIiwiRXhwZWN0ZWRUeXBlIjoiUGFydGlhbCIsIkV4cGVjdGVkSmF2YSI6InBhcnRpYWwoci5oYXNoTWFwKFwiZGJzX2NyZWF0ZWRcIiwgMUwpKSIsIk9idGFpbmVkIjpudWxsLCJSdW5PcHRzIjpbXSwiUmVuZGVyU29tZXRoaW5nIjpmYWxzZX0=" );
                 //JavaQuery, meta/composite.yaml, #25
                 /* ExpectedOriginal: partial({'dbs_created':1}) */
                 var expected_ = partial(r.hashMap("dbs_created", 1L));
                 
                 /* Original: r.db_create('test') */
                 var obtained = runOrCatch( r.dbCreate("test") ,
                                            new {
                    }, conn);
                 
                     assertEquals(expected_, obtained);                 
             }
             

        }
    }
}
